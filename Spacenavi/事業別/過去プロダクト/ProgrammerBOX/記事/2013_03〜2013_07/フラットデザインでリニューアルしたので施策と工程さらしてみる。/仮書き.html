<p>この一週間、黙々とサイトのリニューアルを行っていました。最初は少しだけ変えよっかなって感じだったのですが、少しいじったら雰囲気変わってしまいますからね。同じトーンにしなきゃいけないから次々と変更していきました。</p>

<p>そう、このリニューアルは計画的にデザインを決めてリニューアルしていないんですよね。そうゆう所にも着眼点を置きつつ、どんな施策をしたかと最後に工程も書いていきたいと思います。</p>

<nav class="detail_press_index clearfix">
	<h2 id="s_0p"><span class="color">目次</span></h2>
	<ul class="left no_width">
		<li class="n_0"><span class="scroll_btn">どんなデザインにしたかったか</span></li>
		<li class="n_1"><span class="scroll_btn">インブラウザ・デザインでリニューアルする</span></li>
		<li class="n_2"><span class="scroll_btn">アナリティクスから見えるポイント</span></li>
		<li class="n_3"><span class="scroll_btn">カテゴリー機能を独自実装において気をつけた事</span></li>
		<li class="n_4"><span class="scroll_btn">新しいFBのlikeboxカスタマイズ法発見</span></li>
		<li class="n_5"><span class="scroll_btn">目次スクロールの仕様変更とその理由</span></li>
		<li class="n_6"><span class="scroll_btn">フォームのレスポンシブ実装によるバグを回避</span></li>
		<li class="n_7"><span class="scroll_btn">box-shadowによるブラウザのスクロールが遅くなる点について</span></li>
		<li class="n_8"><span class="scroll_btn">細かい仕様変更のポイント</span></li>
		<li class="n_9"><span class="scroll_btn">まとめ</span></li>
	</ul>
</nav>

	<h2 class="heading">どんなデザインにしたかったか</h2>

	<p>2011年の冬あたりから<strong>フラットデザイン</strong>を施しているサイトが現れていき僕はそれらを恍惚を視線で見つめていました。
		本当にこんなクールでワクワクさせるデザインがあったのかと当時の僕は思いながらいつか僕もこんなデザインやりたいと思いつつプログラムに勤しむ日々でした。</p>

<p class="m_0">そこで今回、プログラマーの僕がフラットデザイン風な感じのデザインにするべくがんばってみました。あくまで風です。</p>
<p>これで<em>フラットデザイン</em>です!と掲げたら<em class="blue_2">本物のデザイナーさんに怒られてしまいます</em>ので。</p>

	<h2 class="heading">インブラウザ・デザインでリニューアルする</h2>
	<p class="m_0">最近この手法が取り上げられる事が多くなったような気がします。</p>
	<p>・・・ですがこれは僕のいつものスタイルでしたので、そうだったんだー。程度でした。まー手法に名前があるという事は説明しやすくていいですね。</p>

<p class="m_0"><strong>インブラウザ・デザイン</strong>とは何かという細かい説明はこのブログの記事を読んで下さい。</p>
<p><a target="_blank" href="http://yumeirodesign.jp/blog/201210/inbrowser-design.html">Photoshop時代の終焉？インブラウザ・デザインでWebサイトを作ってみて感じたこと</a></p>

	<h2 class="heading">アナリティクスから見えるポイント</h2>

	<p>リニューアル前はIE対策を全くやっていませんでした。</p>
<p class="m_0">言い訳を書かせて頂きますと単純にIEの事が・・・IEの事が・・!!なわけでした。</p>
<p>ですがアナリティクスを見ればそんな事も言っていられません。</p>

<p>という事でブラウザ別で訪問別ページビューはどうなっていたかを見ましょう。</p>

<table class="type_1">
	<thead>
		<tr>
			<th>　</th>
			<th>ブラウザ</th>
			<th>訪問別ページビュー</th>
			<th>全体に対する割合</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>1.</td>
			<td>Firefox</td>
			<td>2.33</td>
			<td>21.16%</td>
		</tr>
		<tr>
			<td>2.</td>
			<td>Safari (in-app)</td>
			<td>1.44</td>
			<td>3.06%</td>
		</tr>
		<tr>
			<td>3.</td>
			<td>Safari</td>
			<td>1.43</td>
			<td>20.48%</td>
		</tr>
		<tr>
			<td>4.</td>
			<td>Chrome</td>
			<td>1.41</td>
			<td>41.17%</td>
		</tr>
		<tr>
			<td>5.</td>
			<td>Mozilla Compatible Agent</td>
			<td>1.36</td>
			<td>0.62%</td>
		</tr>
		<tr>
			<td>6.</td>
			<td>Opera</td>
			<td>1.31</td>
			<td>0.66%</td>
		</tr>
		<tr>
			<td><em>7.</em></td>
			<td><em>Internet Explorer</em></td>
			<td><em>1.25</em></td>
			<td><em>10.59%</em></td>
		</tr
	</tbody>
</table>
<p class="m_0">ひっく!全体的にひっく!!</p>
<p>そして、<em class="blue_2">あきらかにIEの訪問別ページビューが低い</em>ですね・・</p>

<p>次はIEの内訳を見てみましょう。</p>

<table class="type_1">
	<thead>
		<tr>
			<th>　</th>
			<th>IEのバージョン</th>
			<th>訪問数</th>
			<th>全体に対する割合</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>1.</td>
			<td>9.0</td>
			<td>1.27</td>
			<td>47.46%</td>
		</tr>
		<tr>
			<td><em>2.</em></td>
			<td><em>8.0</em></td>
			<td><em>1.24</em></td>
			<td><em>30.42%</em></td>
		</tr>
		<tr>
			<td>3.</td>
			<td>10.0</td>
			<td>1.23</td>
			<td>16.97%</td>
		</tr>
		<tr>
			<td>4.</td>
			<td>7.0</td>
			<td>1.22</td>
			<td>2.99%</td>
		</tr>
		<tr>
			<td>5.</td>
			<td>6.0</td>
			<td>1.21</td>
			<td>2.17%</td>
		</tr>	</tbody>
</table>

<p>もう6,7は対応しなくていいんじゃないでしょうか?<em class="blue_2">全体から見ても0.1〜0.3%</em>でした。</p>
<p class="m_0">ところで9,10は対応しているハズなのに6,7,8とそんなに変わらないってどうゆう事でしょう・・。</p>
<p>とっとりあえずIE8にも対応させるべく施策を行います!!</p>

<h3 class="m_b_30">IE8まで対応する為の施策方法</h3>

<h4 class="m_b_15">HTML5の記述を適応させる</h4>

<div class="html_tab">HTML</div>
<pre class="brush: html; light:true; tab-size: 2;">
&lt;!--[if lt IE 9]&gt;
&lt;script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"&gt;&lt;/script&gt;
&lt;![endif]--&gt;
</pre>
<p>とりあえずこのjsを読み込めば新しいHTML5のタグにも対応しCSSが効くようになります。</p>
<p class="m_0">詳しくはこちらのアーチweb制作様の記事を</p>
<p><a target="_blank" href="http://www.arch-web.jp/archives/771/">IE8でも簡単にHTML5とCSS3に対応させる方法</a></p>

<h4 class="m_b_15">CSS3の記述をIE8が実装している範囲で記述していく</h4>

<p>これに関しては一つ一つ確認しつつCSS3を使っていくのが望ましいです。全部わかりきったつもりで制作して最後に気付いたのではシャレになりませんので。</p>

<p class="m_0">詳しくはこちらのWebpark様の記事を</p>
<p><a target="_blank" href="http://weboook.blog22.fc2.com/blog-entry-315.html">CSS3を使うにあたって知っておきたいIE対策のまとめ</a></p>

<h2 class="heading">カテゴリー機能を独自実装において気をつけた事</h2>

	<p class="m_0">このブログにもカテゴリー機能が欲しいな(SEO的に)と思いまして実装してみました。最初はちょとめんどくせーなって思っていたのですが実装してみれば2時間くらいで完成しました。</p>
	<div class="m_b_30"><small>※このブログはワードプレスを使っていなくてPHPでシステムを構築してワードプレスみたいな事を一つ一つ実装して作られています。</small></div>

<p>メインカテゴリーとサブカテゴリーに分けまして記事数が多いカテゴリーが上に行くように実装したのですが、一番心配だったのがページング機能とどう摺り合わせていくかが一番のネックだと思います。</p>

<p>そこでディレクトリ名と紐付けてDBを参照してそのカテゴリーの記事数を引っ張ってきています。まぁ、文章にするとたったこれだけなのですが少しだけややこしかったので(メインとサブの振り分けとか)</p>

<h2 class="heading">新しいFBのlikeboxカスタマイズ法発見</h2>

	<p>色々とごにょごにょしていたら僕、発見しました。FBの仕様変更で色んなサイトでスタマイズしていたlikeboxが崩れていたのですが、僕を手法を使えばどんなデザインでも出来るようになりました。これは別記事で書こうかと思います。</p>

	<h2 class="heading">目次スクロールの仕様変更とその理由</h2>
	<p class="m_0">一番速く変えたかったのがこの目次スクロールでした。</p>
	<p>理由はリニューアル前の目次スクロールはスクロールするとURLに#が付いてしまいました。</p>
<p class="m_0"><strong>はてブを重要視するブログでは致命的</strong>です。</p>
<p>実際に他記事で#が付いたまま、はてブされている記事がありましたので優先度は高い変更点だったと思います。</p>

<h2 class="heading">フォームのレスポンシブ実装によるバグを回避</h2>

	<p>前のデザインではフッダーにフォームがありました。あるだけならいいんですがレスポンシブでバグがあるのです。<em class="blue_2">WebKitで縦で読み込み横にしてから縦にすると横のサイズが戻らないバグ</em>です。</p>
	<p>誰にも気付かれないレベルだったのですが何か気持悪いのでお問い合わせはお問い合わせのページを作成し、フッダーからはフォームを外しました。

<h2 class="heading">box-shadowによるブラウザのスクロールが遅くなる点について</h2>

	<p>話題に触れる人が少ないのは何故でしょう。CSS3のbox-shadowはかなりCPUに負担をかけます。そしてブラウザのスクロールが遅くなります。</p>
<p>今回はブラウザがどんどんアップデートして最適化されてきているなと感じましたのでbox-shadowをふんだんに使いました。</p>

<p>ただ、UXの面を気にする方だったり、商業的のサイトではbox-shadowはまだ使わない方がいいです。さくさくスクロールする人からするとイラっとくるカクツキが出ます。</p>
<p>普通にborderを使った方がいいですね。</p>

	<h2 class="heading">細かい仕様変更のポイント</h2>

	<p class="m_0">その他は特段変更はありませんが見出しとか変えました。</p>
	<p>後はaboutページの文章足したくらいですねー。</p>
	<p>あ、後はカテゴリー毎に色を振り分けた category_band はお気に入りです。</p>

	<h2 class="heading">まとめ</h2>
	<p>工程について一切語っていませんでしたので、少しだけここで説明させて頂きます。</p>

	<p>最初で述べた通りデザインはインブラウザ・デザインで行いました。先ず、初めにグリッドを引きます。(でっかいグリッドの画像をabsoluteで表示してopacty:0.7にする) そして、どんなサイズが良いかを初めに決めて空間を作っていきます。</p>

<p>次にそのボックスをどんなデザインにするかを決めます。このボックスのデザインが決まればその流れに沿ってデザインを決めていくだけになります。</p>

<p>ただ、今回は記事の上にcategory_bandを表示したかったので空間規則はここで破っています。破ってもそれ以上にメリットがあると考え不規則な空間規則になりました。</p>


<p class="m_0">ここではまだカラーについては決めていません、大体イメージで付けていますが。</p>
<p>全てのデザインが完成したらバックカラーを決めてその上に表示するボックスの色を決めます。その次にcategory_bandの色を。最後に文字の色の調整をして完成です。</p>

<p>かなり大雑把に説明しましたが僕はいつもこんな感じでサイトを作ってます。</p>


<p>今回はリニューアルの記事を書かせて頂いたのですが3ヶ月後とかにリニューアル前とリニューアル後のアナリティクスでの比較記事も書ければなと思っています。</p>

<p class="m_0">ということで</p>
<p>ではではー。</p>